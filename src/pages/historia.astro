---
import Layout from '../layouts/Layout.astro';
import FilterBar from '../components/FilterBar.astro';
---

<Layout title="Historia - Batman">
        <div class="historia-container">
                <h1>Historia de Batman</h1>
                <p class="intro">Explora la evoluci칩n del Caballero Oscuro a trav칠s de c칩mics y pel칤culas</p>

                <!-- Filtros -->
                <FilterBar filtros={["Todos", "游닄 C칩mics", "游꿟 Pel칤culas"]} selected="Todos" />
                                <script is:inline>
                                (() => {
                                    const filtros = ["Todos", "游닄 C칩mics", "游꿟 Pel칤culas"];
                                    const categorias = {
                                        "Todos": null,
                                        "游닄 C칩mics": "comics",
                                        "游꿟 Pel칤culas": "peliculas"
                                    };
                                    function setupFilterBar() {
                                        const filterBar = document.querySelector('.filterbar');
                                        if (!filterBar) return;
                                        filterBar.addEventListener('click', (e) => {
                                            const btn = e.target.closest('.btn-filtro');
                                            if (!btn) return;
                                            filterBar.querySelectorAll('.btn-filtro').forEach(b => b.classList.remove('active'));
                                            btn.classList.add('active');
                                            const filtro = btn.textContent.trim();
                                            const categoria = categorias[filtro];
                                            document.querySelectorAll('.timeline-item').forEach(item => {
                                                if (!categoria || item.dataset.categoria === categoria) {
                                                    item.style.display = '';
                                                } else {
                                                    item.style.display = 'none';
                                                }
                                            });
                                        });
                                    }
                                    if (document.readyState === 'loading') {
                                        document.addEventListener('DOMContentLoaded', setupFilterBar);
                                    } else {
                                        setupFilterBar();
                                    }
                                    // Astro SPA navigation support
                                    document.addEventListener('astro:after-swap', setupFilterBar);
                                })();
                                </script>

        <!-- Timeline -->
        <div class="timeline">
            <!-- Comics -->
            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1939</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>Detective Comics #27</h3>
                    <p>Primera aparici칩n de Batman. Creado por Bob Kane y Bill Finger. Bruce Wayne hace su debut como el vigilante de Gotham.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1940</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>Batman #1</h3>
                    <p>Introducci칩n de Joker y Catwoman. La primera serie en solitario de Batman comienza su publicaci칩n.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1940</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>Detective Comics #38</h3>
                    <p>Primera aparici칩n de Robin (Dick Grayson). Nace el D칰o Din치mico de Gotham.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1966</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Batman: La Pel칤cula</h3>
                    <p>Adam West protagoniza la primera pel칤cula de Batman en el cine, basada en la serie de TV. Tono camp y colorido.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1986</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>The Dark Knight Returns</h3>
                    <p>Frank Miller redefine a Batman en una historia oscura y madura. Un Batman retirado regresa para salvar Gotham.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1988</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>The Killing Joke</h3>
                    <p>Alan Moore explora el origen de Joker en una de las historias m치s ic칩nicas y controversiales de Batman.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1989</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Batman (Tim Burton)</h3>
                    <p>Michael Keaton como Batman. Tim Burton revoluciona el g칠nero con un tono g칩tico y oscuro. Jack Nicholson como Joker.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1992</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Batman Returns</h3>
                    <p>Segunda colaboraci칩n de Burton y Keaton. Michelle Pfeiffer como Catwoman y Danny DeVito como Ping칲ino.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1993</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>Knightfall</h3>
                    <p>Bane rompe la espalda de Batman. Jean-Paul Valley toma el manto temporalmente en esta saga 칠pica.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1995</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Batman Forever</h3>
                    <p>Val Kilmer como Batman. Joel Schumacher dirige con Jim Carrey como El Acertijo y Tommy Lee Jones como Dos Caras.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">1997</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Batman & Robin</h3>
                    <p>George Clooney como Batman. Arnold Schwarzenegger como Mr. Freeze. Considerada la peor pel칤cula de Batman.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2003</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>Hush</h3>
                    <p>Jeph Loeb y Jim Lee crean un misterio que involucra a todos los villanos de Batman y un nuevo enemigo misterioso.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2005</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Batman Begins</h3>
                    <p>Christopher Nolan reinicia la franquicia con Christian Bale. Origen realista y ground. Ra's al Ghul y Espantap치jaros como villanos.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2008</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>The Dark Knight</h3>
                    <p>Heath Ledger como Joker en su actuaci칩n legendaria (p칩stuma). Considerada una de las mejores pel칤culas de superh칠roes.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2011</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>Court of Owls</h3>
                    <p>Scott Snyder introduce una nueva organizaci칩n secreta que ha controlado Gotham durante siglos. Reinicio de New 52.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2012</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>The Dark Knight Rises</h3>
                    <p>Conclusi칩n de la trilog칤a de Nolan. Tom Hardy como Bane y Anne Hathaway como Catwoman. Batman enfrenta su prueba final.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2016</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Batman v Superman</h3>
                    <p>Ben Affleck como un Batman m치s viejo y brutal. Primera vez que Batman y Superman pelean en cine live-action.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2017</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>Justice League</h3>
                    <p>Batman re칰ne a los h칠roes m치s poderosos de la Tierra para enfrentar una amenaza alien칤gena.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="comics">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2018</span>
                    <span class="categoria-badge comics">C칩mic</span>
                    <h3>Batman: White Knight</h3>
                    <p>Sean Murphy presenta una realidad alternativa donde Joker se cura y expone la corrupci칩n de Batman.</p>
                </div>
            </div>

            <div class="timeline-item" data-categoria="peliculas">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                    <span class="year">2022</span>
                    <span class="categoria-badge peliculas">Pel칤cula</span>
                    <h3>The Batman</h3>
                    <p>Robert Pattinson como un joven Batman detective. Matt Reeves dirige una historia noir con El Acertijo como villano principal.</p>
                </div>
            </div>
        </div>
    </div>
</Layout>

<style>
    .historia-container {
        padding: 20px;
        max-width: 1000px;
        margin: 0 auto;
    }

    h1 {
        text-align: center;
        color: #f7d354;
        font-size: 3rem;
        margin-bottom: 20px;
        text-transform: uppercase;
        letter-spacing: 3px;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
    }

    .intro {
        text-align: center;
        font-size: 1.2rem;
        color: #ccc;
        margin-bottom: 40px;
        line-height: 1.6;
    }

    /* Filtros */
    .filtros {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 50px;
        flex-wrap: wrap;
    }

    .btn-filtro {
        padding: 12px 30px;
        font-size: 1rem;
        font-weight: bold;
        border: 2px solid #f7d354;
        border-radius: 8px;
        background-color: rgba(0, 0, 0, 0.6);
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .btn-filtro:hover {
        background-color: rgba(247, 211, 84, 0.2);
        transform: translateY(-2px);
    }

    .btn-filtro.active {
        background-color: #f7d354;
        color: #000;
        box-shadow: 0 4px 15px rgba(247, 211, 84, 0.5);
    }

    /* Timeline */
    .timeline {
        position: relative;
        padding: 20px 0;
    }

    .timeline::before {
        content: '';
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: 4px;
        height: 100%;
        background: linear-gradient(180deg, #f7d354 0%, #1a1a1a 100%);
        box-shadow: 0 0 10px rgba(247, 211, 84, 0.5);
    }

    .timeline-item {
        display: flex;
        justify-content: flex-start;
        padding: 20px 0;
        position: relative;
        opacity: 1;
        transition: all 0.5s ease;
    }

    .timeline-item.oculto {
        display: none;
    }

    .timeline-item:nth-child(even) {
        justify-content: flex-end;
    }

    .timeline-marker {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: 20px;
        height: 20px;
        background: #f7d354;
        border: 4px solid #1a1a1a;
        border-radius: 50%;
        z-index: 10;
        box-shadow: 0 0 15px rgba(247, 211, 84, 0.8);
        animation: pulse-marker 2s ease-in-out infinite;
    }

    @keyframes pulse-marker {
        0%, 100% {
            box-shadow: 0 0 15px rgba(247, 211, 84, 0.8);
        }
        50% {
            box-shadow: 0 0 25px rgba(247, 211, 84, 1);
        }
    }

    .timeline-content {
        width: 45%;
        padding: 25px;
        background: linear-gradient(145deg, #2d2d2d, #1a1a1a);
        border: 2px solid #f7d354;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        position: relative;
        transition: all 0.4s ease;
    }

    .timeline-content:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 30px rgba(247, 211, 84, 0.3);
        border-color: #fff;
    }

    .timeline-item:nth-child(even) .timeline-content {
        text-align: right;
    }

    .year {
        display: inline-block;
        font-size: 1.8rem;
        font-weight: bold;
        color: #f7d354;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    }

    .categoria-badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 0.85rem;
        font-weight: bold;
        margin-bottom: 10px;
        margin-left: 10px;
    }

    .categoria-badge.comics {
        background-color: rgba(100, 149, 237, 0.3);
        color: #6495ED;
        border: 1px solid #6495ED;
    }

    .categoria-badge.peliculas {
        background-color: rgba(220, 20, 60, 0.3);
        color: #DC143C;
        border: 1px solid #DC143C;
    }

    .timeline-content h3 {
        color: #fff;
        font-size: 1.5rem;
        margin-bottom: 12px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .timeline-content p {
        color: #ccc;
        line-height: 1.7;
        font-size: 1rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .timeline::before {
            left: 30px;
        }

        .timeline-marker {
            left: 30px;
        }

        .timeline-item,
        .timeline-item:nth-child(even) {
            justify-content: flex-end;
        }

        .timeline-content {
            width: calc(100% - 80px);
        }

        .timeline-item:nth-child(even) .timeline-content {
            text-align: left;
        }

        h1 {
            font-size: 2rem;
        }

        .filtros {
            flex-direction: column;
        }

        .btn-filtro {
            width: 100%;
        }
    }

    @media (max-width: 768px) {
        .historia-container { padding: 15px; }
        .timeline::before { left: 20px; }
        .timeline-item { justify-content: flex-start !important; padding-left: 60px; }
        .timeline-marker { left: 20px; }
        .timeline-content { width: 100%; text-align: left !important; padding: 15px; }
    }

    @media (max-width: 480px) {
        h1 { font-size: 1.5rem; }
        .timeline::before { left: 15px; }
        .timeline-item { padding-left: 45px; }
        .timeline-marker { left: 15px; width: 16px; height: 16px; }
        .timeline-content { padding: 12px; font-size: 0.9rem; }
    }
</style>

<script>
    const botonesFiltro = document.querySelectorAll('.btn-filtro');
    const itemsTimeline = document.querySelectorAll('.timeline-item');

    let filtroActual = 'todos';

    function actualizarVista() {
        itemsTimeline.forEach(item => {
            const categoria = (item as HTMLElement).dataset.categoria;
            
            if (filtroActual === 'todos' || categoria === filtroActual) {
                item.classList.remove('oculto');
            } else {
                item.classList.add('oculto');
            }
        });
    }

    botonesFiltro.forEach(boton => {
        boton.addEventListener('click', () => {
            botonesFiltro.forEach(b => b.classList.remove('active'));
            boton.classList.add('active');
            
            filtroActual = (boton as HTMLElement).dataset.filtro || 'todos';
            actualizarVista();
        });
    });
</script>

